"use strict";(self.webpackChunkyunfly_docs=self.webpackChunkyunfly_docs||[]).push([[833],{3905:(e,n,t)=>{t.d(n,{Zo:()=>u,kt:()=>g});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var s=r.createContext({}),c=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=c(e.components);return r.createElement(s.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,l=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=c(t),d=o,g=p["".concat(s,".").concat(d)]||p[d]||m[d]||l;return t?r.createElement(g,a(a({ref:n},u),{},{components:t})):r.createElement(g,a({ref:n},u))}));function g(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var l=t.length,a=new Array(l);a[0]=d;var i={};for(var s in n)hasOwnProperty.call(n,s)&&(i[s]=n[s]);i.originalType=e,i[p]="string"==typeof e?e:o,a[1]=i;for(var c=2;c<l;c++)a[c]=t[c];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7372:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>a,default:()=>m,frontMatter:()=>l,metadata:()=>i,toc:()=>c});var r=t(7462),o=(t(7294),t(3905));const l={sidebar_position:3},a="\u9010\u6b65\u642d\u5efa",i={unversionedId:"simple-use/gradually-build",id:"simple-use/gradually-build",title:"\u9010\u6b65\u642d\u5efa",description:"- \u4e00\u6b65\u4e00\u6b65\u9010\u6b65\u642d\u5efa",source:"@site/docs/simple-use/gradually-build.md",sourceDirName:"simple-use",slug:"/simple-use/gradually-build",permalink:"/doc.github.io/docs/simple-use/gradually-build",editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/simple-use/gradually-build.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"\u5feb\u901f\u5f00\u59cb",permalink:"/doc.github.io/docs/simple-use/quickly-start"}},s={},c=[{value:"\u8bbe\u7f6e npm \u955c\u50cf\u6e90",id:"\u8bbe\u7f6e-npm-\u955c\u50cf\u6e90",level:2},{value:"\u521d\u59cb\u5316\u9879\u76ee",id:"\u521d\u59cb\u5316\u9879\u76ee",level:2},{value:"\u521d\u59cb\u5316\u4e0b\u76ee\u5f55\u7ed3\u6784",id:"\u521d\u59cb\u5316\u4e0b\u76ee\u5f55\u7ed3\u6784",level:3},{value:"\u914d\u7f6e\u811a\u672c\u547d\u4ee4",id:"\u914d\u7f6e\u811a\u672c\u547d\u4ee4",level:3},{value:"\u914d\u7f6e tsconfig.json",id:"\u914d\u7f6e-tsconfigjson",level:3},{value:"\u7f16\u5199 Controller",id:"\u7f16\u5199-controller",level:2},{value:"\u914d\u7f6e Config",id:"\u914d\u7f6e-config",level:2},{value:"\u8fd0\u884c\u9879\u76ee",id:"\u8fd0\u884c\u9879\u76ee",level:2}],u={toc:c},p="wrapper";function m(e){let{components:n,...t}=e;return(0,o.kt)(p,(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"\u9010\u6b65\u642d\u5efa"},"\u9010\u6b65\u642d\u5efa"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u4e00\u6b65\u4e00\u6b65\u9010\u6b65\u642d\u5efa")),(0,o.kt)("h2",{id:"\u8bbe\u7f6e-npm-\u955c\u50cf\u6e90"},"\u8bbe\u7f6e npm \u955c\u50cf\u6e90"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// npm\nnpm config set registry https://registry.npmmirror.com\n// yarn\nyarn config set registry https://registry.npmmirror.com\n")),(0,o.kt)("h2",{id:"\u521d\u59cb\u5316\u9879\u76ee"},"\u521d\u59cb\u5316\u9879\u76ee"),(0,o.kt)("h3",{id:"\u521d\u59cb\u5316\u4e0b\u76ee\u5f55\u7ed3\u6784"},"\u521d\u59cb\u5316\u4e0b\u76ee\u5f55\u7ed3\u6784"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"mkdir yunfly-example\ncd yunfly-example\nyarn init\nyarn add yunfly\nyarn add cross-env typescript tsconfig-paths gts --dev\n")),(0,o.kt)("h3",{id:"\u914d\u7f6e\u811a\u672c\u547d\u4ee4"},"\u914d\u7f6e\u811a\u672c\u547d\u4ee4"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"package.json")," \u4e2d\u6dfb\u52a0 ",(0,o.kt)("inlineCode",{parentName:"li"},"npm scripts")," \u811a\u672c")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="package.json"',title:'"package.json"'},'{\n    "scripts": {\n        "dev": "cross-env NODE_ENV=dev PORT=3000 yunfly",\n        "watch:dev": "cross-env NODE_ENV=dev PORT=3000 yunfly --watch",\n        "run": "cross-env PORT=3000 NODE_ENV=production RUNTIME_ENV=prod yunfly",\n        "build": "yarn clean && yarn compile",\n        "clean": "gts clean",\n        "compile": "tsc -p ."\n    }\n}\n')),(0,o.kt)("h3",{id:"\u914d\u7f6e-tsconfigjson"},"\u914d\u7f6e tsconfig.json"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-json",metastring:'title="tsconfig.json"',title:'"tsconfig.json"'},'{\n  "extends": "./node_modules/gts/tsconfig-google.json",\n  "compilerOptions": {\n    "rootDir": "src",\n    "outDir": "./build/",\n    "experimentalDecorators": true,\n    "emitDecoratorMetadata": true,\n    "noEmitOnError": false,\n    "noUnusedLocals": true,\n    "noUnusedParameters": false,\n    "moduleResolution": "node",\n    "strictPropertyInitialization": false,\n    "module": "commonjs",\n    "target": "es2017",\n    "sourceMap": false\n  },\n  "include": [\n    "src/**/*.ts"\n  ],\n  "exclude": [\n    "node_modules"\n  ]\n}\n')),(0,o.kt)("h2",{id:"\u7f16\u5199-controller"},"\u7f16\u5199 Controller"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/controller/ExampleController.ts"',title:'"src/controller/ExampleController.ts"'},"import { Get, JsonController, BodyParam, Post, QueryParam } from 'yunfly';\n/**\n * \u6d4b\u8bd5\u6848\u4f8bcontroller\n *\n * @export\n * @class TestController\n */\n@JsonController('/example')\nexport default class ExampleController {\n  /**\n   * \u7b80\u5355\u6848\u4f8b - get\n   *\n   * @param {string} name \u59d3\u540d\n   * @return {*}  {string}\n   * @memberof ExampleController\n   */\n    @Get('/simple/get')\n    simple(\n        @QueryParam('name') name: string,\n    ): string {\n        return name || 'success';\n    }\n    /**\n    * \u7b80\u5355\u6848\u4f8b -post\n    *\n    * @param {string} name \u59d3\u540d\n    * @return {*}  {string}\n    * @memberof ExampleController\n    */\n    @Post('/simple/post')\n    simple1(\n        @BodyParam('name') name: string,\n    ): string {\n        return name || 'success';\n    }\n}\n")),(0,o.kt)("h2",{id:"\u914d\u7f6e-config"},"\u914d\u7f6e Config"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts",metastring:'title="src/config/config.default.ts"',title:'"src/config/config.default.ts"'},"\n/**\n * This is an env aggregation default config.\n * (note) this is a minimum config.\n*/\nimport * as path from 'path';\nimport { Config } from 'yunfly';\n\nconst config = () => {\n    const config: Config = {};\n\n    /*\n    * routing-controllers configs\n    * 1. controllers\u3001middlewares\u3001authorizationChecker \u9700\u8981\u4f7f\u7528`path.join`\u8fdb\u884c\u6587\u4ef6\u4f4d\u7f6e\u7684\u7edd\u5bf9\u5b9a\u4f4d\n    * 2. \u5982\u679c middlewares \u3001authorizationChecker\u4e2d\u6709rpc\u8bf7\u6c42\uff0c\u5219\u9700\u8981\u4f7f\u7528\u51fd\u6570\u5305\u88f9\u3002\n    */\n    config.routingControllersOptions = {\n        defaultErrorHandler: false,\n        controllers: [path.join(__dirname, '../controller/*')],\n        middlewares: [path.join(__dirname, '../middleware/*')],\n        // middlewares: [\n        //   require(path.join(__dirname,'../middleware/xxxMiddleware')).default,\n        // ]\n        defaults: {\n            nullResultCode: 200,  // 204 | 404\n            undefinedResultCode: 200 // 204 | 404\n        }\n    };\n    \n    return config;\n};\n\nexport default config;\n")),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"\u6b64\u65f6\u76ee\u5f55\u7ed3\u6784\u5982\u4e0b\uff1a")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"yunfly-example\n\u251c\u2500\u2500 src\n\u2502   \u251c\u2500\u2500 config \n\u2502   \u2502   \u2514\u2500\u2500 config.default.ts\n\u2502   \u2514\u2500\u2500 controller\n\u2502       \u2514\u2500\u2500 ExampleController.ts\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 tsconfig.json\n\u2514\u2500\u2500 yarn.locak\n")),(0,o.kt)("h2",{id:"\u8fd0\u884c\u9879\u76ee"},"\u8fd0\u884c\u9879\u76ee"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"// \u8fd0\u884c\nyarn dev\n// \u76d1\u542c\u6a21\u5f0f\u8fd0\u884c \nyarn watch:dev\n\n// open: http://127.0.0.1:3000/example/simple/get?name=xiaoming\n")))}m.isMDXComponent=!0}}]);